import socket
import threading

ServerIP = input("Enter the Server IP: ")
PORT = int(input("Port: "))

client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
try:
    username = input(f'Enter a username: ')
    client.connect((ServerIP, PORT))
    print(f'Connected Sucessfully to {ServerIP}:{PORT}')
except:
    print(f'Please try review your input: {ServerIP}:{PORT}')

# Recebe mensagem do servidor
# servidor manda um  getUser


def receiveMessage():
    while True:
        try:
            # Obtendo username do client
            message = client.recv(2048).decode('ascii')
            if message =='getUser':
                client.send(username.encode('ascii'))
            else:
                print(message)  # mensagem do usuario -> Usuario: OlÃ¡
        except:
            print('ERROR: Check your connection or server migth be offiline')


def sendMessage():
    while True:
        client.send(input().encode('ascii'))


thread1 = threading.Thread(target=receiveMessage, args=())
thread2 = threading.Thread(target=sendMessage, args=())

thread1.start()
thread2.start()
